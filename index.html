<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tu as tout accepté !</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 2em;
      background-color: #f2f2f2;
    }
    h1 {
      color: #cc0000;
    }
    .info {
      margin: 1em 0;
      padding: 1em;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    video, canvas {
      margin-top: 1em;
      max-width: 100%;
    }
    footer {
      margin-top: 3em;
      font-size: 0.9em;
      color: #555;
    }
  </style>
</head>
<body>
  <h1>Alors comme ça, vous avez tout accepté ?</h1>
  <p>Voici ce que je sais de vous maintenant ...</p>

  <div class="info" id="location">📍 Position : ...</div>
  <div class="info" id="battery">🔋 Batterie : ...</div>
  <div class="info" id="connection">📶 Connexion réseau : ...</div>
  <div class="info" id="uptime">⏱️ Temps depuis l'ouverture : ...</div>
  <div class="info" id="device">📱 Appareil : ...</div>
  <div class="info">
    📷 Caméra : <br />
    <video id="video" autoplay muted playsinline width="320" height="240"></video>
  </div>

  <footer>
    Ces données n'ont pas été récoltées... <strong>mais elles auraient pu l'être !</strong>
  </footer>

  <script>
    // Localisation
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        position => {
          document.getElementById("location").textContent = `📍 Position : Latitude ${position.coords.latitude.toFixed(5)}, Longitude ${position.coords.longitude.toFixed(5)}`;
        },
        err => {
          document.getElementById("location").textContent = "📍 Position : refusée ou non disponible";
        }
      );
    }

    // Batterie
    if (navigator.getBattery) {
      navigator.getBattery().then(battery => {
        const percent = Math.round(battery.level * 100);
        document.getElementById("battery").textContent = `🔋 Batterie : ${percent}% ${battery.charging ? '(en charge)' : ''}`;
      });
    }

    // Connexion
    if (navigator.connection) {
      document.getElementById("connection").textContent = `📶 Connexion réseau : ${navigator.connection.effectiveType}`;
    } else {
      document.getElementById("connection").textContent = "📶 Connexion réseau : non disponible";
    }

    // Temps depuis l'ouverture de la page
    const start = performance.now();
    setInterval(() => {
      const seconds = Math.floor((performance.now() - start) / 1000);
      const minutes = Math.floor(seconds / 60);
      const remainingSeconds = seconds % 60;
      document.getElementById("uptime").textContent = `⏱️ Temps depuis l'ouverture : ${minutes} min ${remainingSeconds} sec`;
    }, 1000);

    // Infos appareil
    document.getElementById("device").textContent = `📱 Appareil : ${navigator.userAgent}, Langue : ${navigator.language}, Résolution : ${screen.width}x${screen.height}`;

    // Caméra
    const video = document.getElementById("video");
    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
      navigator.mediaDevices.getUserMedia({ video: true })
        .then(stream => {
          video.srcObject = stream;
        })
        .catch(err => {
          video.parentElement.innerHTML = "📷 Caméra : refusée ou non disponible";
        });
    }
  </script>
</body>
</html>
