<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tu as tout acceptÃ© !</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 2em;
      background-color: #f2f2f2;
    }
    h1 {
      color: #cc0000;
    }
    .info {
      margin: 1em 0;
      padding: 1em;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    video, canvas {
      margin-top: 1em;
      max-width: 100%;
    }
    footer {
      margin-top: 3em;
      font-size: 0.9em;
      color: #555;
    }
  </style>
</head>
<body>
  <h1>Alors comme Ã§a, vous avez tout acceptÃ© ?</h1>
  <p>Voici ce que je sais de vous maintenant ...</p>

  <div class="info" id="location">ğŸ“ Position : ...</div>
  <div class="info" id="battery">ğŸ”‹ Batterie : ...</div>
  <div class="info" id="connection">ğŸ“¶ Connexion rÃ©seau : ...</div>
  <div class="info" id="uptime">â±ï¸ Temps depuis l'ouverture : ...</div>
  <div class="info" id="device">ğŸ“± Appareil : ...</div>
  <div class="info">
    ğŸ“· CamÃ©ra : <br />
    <video id="video" autoplay muted playsinline width="320" height="240"></video>
  </div>

  <footer>
    Ces donnÃ©es n'ont pas Ã©tÃ© rÃ©coltÃ©es... <strong>mais elles auraient pu l'Ãªtre !</strong>
  </footer>

  <script>
    // Localisation
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        position => {
          document.getElementById("location").textContent = `ğŸ“ Position : Latitude ${position.coords.latitude.toFixed(5)}, Longitude ${position.coords.longitude.toFixed(5)}`;
        },
        err => {
          document.getElementById("location").textContent = "ğŸ“ Position : refusÃ©e ou non disponible";
        }
      );
    }

    // Batterie
    if (navigator.getBattery) {
      navigator.getBattery().then(battery => {
        const percent = Math.round(battery.level * 100);
        document.getElementById("battery").textContent = `ğŸ”‹ Batterie : ${percent}% ${battery.charging ? '(en charge)' : ''}`;
      });
    }

    // Connexion
    if (navigator.connection) {
      document.getElementById("connection").textContent = `ğŸ“¶ Connexion rÃ©seau : ${navigator.connection.effectiveType}`;
    } else {
      document.getElementById("connection").textContent = "ğŸ“¶ Connexion rÃ©seau : non disponible";
    }

    // Temps depuis l'ouverture de la page
    const start = performance.now();
    setInterval(() => {
      const seconds = Math.floor((performance.now() - start) / 1000);
      const minutes = Math.floor(seconds / 60);
      const remainingSeconds = seconds % 60;
      document.getElementById("uptime").textContent = `â±ï¸ Temps depuis l'ouverture : ${minutes} min ${remainingSeconds} sec`;
    }, 1000);

    // Infos appareil
    document.getElementById("device").textContent = `ğŸ“± Appareil : ${navigator.userAgent}, Langue : ${navigator.language}, RÃ©solution : ${screen.width}x${screen.height}`;

    // CamÃ©ra
    const video = document.getElementById("video");
    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
      navigator.mediaDevices.getUserMedia({ video: true })
        .then(stream => {
          video.srcObject = stream;
        })
        .catch(err => {
          video.parentElement.innerHTML = "ğŸ“· CamÃ©ra : refusÃ©e ou non disponible";
        });
    }
  </script>
</body>
</html>
